# 网站前端-比赛系统

[TOC]

## group/\_slug/contest/\_id.vue

| 参数 | 值                                               |
| ---- | ------------------------------------------------ |
| 地址 | `/group/<group id>/contest/<contest id>`         |
| 用途 | 查看 group id 小组下属的编号为 contest id 的比赛 |
| 权限 | 登录用户                                         |
| 预览 | ![](imgs\group_slug_contest_id.PNG)              |

| 属性           | 解释                                                                                 |
| -------------- | ------------------------------------------------------------------------------------ |
| caution        | 切换我派遣的 AI 时，会弹出弹窗警告切换 AI 版本有扣分惩罚，caution 用于绑定弹窗的数据 |
| contest        | 比赛的详细信息，使用 asyncData 获取值                                                |
| contest.game   | 比赛使用的游戏的信息                                                                 |
| contest.group  | 比赛所属的小组的信息                                                                 |
| contest.entity | 在比赛中本用户派遣的 ai                                                              |

| 函数           | 参数               | 返回值       | 解释                                                                                                                               |
| -------------- | ------------------ | ------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| total/progress | null               | null         | 用于维护比赛的进度条                                                                                                               |
| getTime        | 以 ms 为单位的时间 | 可读时间表示 | 转换时间表示方法                                                                                                                   |
| updateTime     | null               | null         | 在 vue 生命周期的 create 阶段创建计时器，每隔 1s 计时器响应一次，并调用 updateTime，用于根据时间维护未开始/进行中/已结束的比赛状态 |
| selectCode     | 代码分支对象       | null         | 选择 AI 的版本进行派遣                                                                                                             |
| cancelCode     | 比赛对象           | null         | 向服务器发送请求取消该比赛派遣的 AI                                                                                                |
| openCaution    | 警告文本           | null         | 如果已经派遣了 AI，在更换 AI 时会弹出排行榜降分警告                                                                                |

| 依赖部件     | 传入部件参数                             |
| ------------ | ---------------------------------------- |
| codeSelector | 比赛名，用户名，游戏，原始 AI 版本等数据 |

## group/\_slug/contest/\_slug\_/ranklist.vue

| 参数 | 值                                                       |
| ---- | -------------------------------------------------------- |
| 地址 | `/group/<group id>/contest/<contest id>/ranklist`        |
| 用途 | 查看 group id 小组下属的编号为 contest id 的比赛的排行榜 |
| 权限 | 登录用户                                                 |
| 预览 | ![](imgs\group_slug_contest_id_ranklist.PNG)             |

| 属性    | 解释                                                        |
| ------- | ----------------------------------------------------------- |
| timer\_ | 定时器，每隔 1s 更新一次                                    |
| contest | 该排行榜对应的比赛的详细信息，使用 asyncData 获取值         |
| players | 排行榜中每个玩家的信息，包括得分，username，AI 分支和版本号 |

| 函数           | 参数               | 返回值             | 解释                                                                       |
| -------------- | ------------------ | ------------------ | -------------------------------------------------------------------------- |
| getTime        | 以 ms 为单位的时间 | 可读格式的时间表示 | 转化时间格式为可读表示                                                     |
| updateTime     | null               | null               | 计时器更新时调用，更新当前时间，主要用于已结束/进行中/未开始的比赛状态维护 |
| updateRanklist | null               | null               | 向服务器发送请求更新当前的排行榜，原本设计成定时更新，后来舍弃             |

| 依赖部件 | 传入部件参数              |
| -------- | ------------------------- |
| ranklist | players，当前排行榜的数据 |
